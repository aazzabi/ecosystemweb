{% extends 'baseBack.html.twig' %}
{% block stylesheets %}
    <link href="{{ asset('assetsBack/css/lib/toastr/toastr.min.css') }}" rel="stylesheet">

{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-title">
                    <h4>Create a newsletter</h4>
                </div>
                <div class="card-body mt-3">
                    <div class="basic-form">
                        {{ form_start(form) }}
                        <div class="form-group">
                            <input type="text" class="form-control input-default" id="subject" name="subject"
                                   placeholder="Newsletter subject">
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control input-default" id="to" name="to"
                                   placeholder="To :">
                        </div>
                        <div class="row justify-content-center mb-4">
                            <label><input type="checkbox" class="form-control" id="sendall" name="sendall"> Or you can
                                send to all registered
                                user</label>
                        </div>
                        {{ form_widget(form.contenu) }}
                        <div class="row justify-content-between mt-4">
                            <input type="submit" class="btn btn-outline-primary" name="save" id="save" value="Save">
                            <input type="submit" class="btn btn-outline-info mr-3" name="send" id="send" value="Send">
                        </div>
                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/js/lib/toastr/toastr.min.js') }}"></script>
    <!-- scripit init-->
    <script src="{{ asset('assets/js/lib/toastr/toastr.init.js') }}"></script>
    <script>
        $('#sendall').change(function () {
            if ($("#sendall").prop('checked')) {
                $('#to').attr("disabled", true);

            } else {
                $('#to').attr("disabled", false);
            }
        });
        $("#save").click(function (event) {
            if ($('#subject').val() === '') {
                toastr.error('Error: The subject cannot be empty', 'Errror', {
                    "positionClass": "toast-top-right",
                    timeOut: 5000,
                    "closeButton": true,
                    "debug": false,
                    "newestOnTop": true,
                    "progressBar": true,
                    "preventDuplicates": true,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut",
                    "tapToDismiss": false
                });
                event.preventDefault();
                return false;
            }
            if ($('#to').val() === '') {
                toastr.error('Error: The recipient cannot be empty', 'Errror', {
                    "positionClass": "toast-top-right",
                    timeOut: 5000,
                    "closeButton": true,
                    "debug": false,
                    "newestOnTop": true,
                    "progressBar": true,
                    "preventDuplicates": true,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut",
                    "tapToDismiss": false
                });
                event.preventDefault();
                return false;
            }
        });
        $("#send").click(function (event) {
            if ($('#subject').val() === '') {
                toastr.error('Error: The subject cannot be empty', 'Errror', {
                    "positionClass": "toast-top-right",
                    timeOut: 5000,
                    "closeButton": true,
                    "debug": false,
                    "newestOnTop": true,
                    "progressBar": true,
                    "preventDuplicates": true,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut",
                    "tapToDismiss": false
                });
                event.preventDefault();
                return false;
            }
            if ($('#to').val() === '') {
                toastr.error('Error: The recipient cannot be empty', 'Errror', {
                    "positionClass": "toast-top-right",
                    timeOut: 5000,
                    "closeButton": true,
                    "debug": false,
                    "newestOnTop": true,
                    "progressBar": true,
                    "preventDuplicates": true,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut",
                    "tapToDismiss": false
                });
                event.preventDefault();
                return false;
            }
        });
    </script>
{% endblock %}