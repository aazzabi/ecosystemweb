{% extends 'base.html.twig' %}

    {% block stylesheets %}
        <link href="{{ asset ('assets/css/Recyclage.css') }}" rel="stylesheet" type="text/css">

    {% endblock %}

    {% block body %}


        <div id="page" class="container-fluid m-t-10" >

            <span class="align-content-center">Il est temps de prendre action...</span>

            <div class="wrapper">
                <div class="bottom">
                    <img src="https://previews.123rf.com/images/antikainen/antikainen1208/antikainen120800268/15583667-sidi-bou-said-tunisia-circa-may-2012-beautiful-streets-of-blue-white-sidi-bou-said-town-on-circa-may.jpg"
                         draggable="false"/>
                </div>
                <div class="middle">
                    <img src="https://cdn2.webmanagercenter.com/di/wp-content/uploads/2016/03/nettoyer-la-rue-tunisie-directinfo.jpg"
                         draggable="false"/>
                </div>
                <div class="scroller scroller-middle">
                    <svg class="scroller__thumb" xmlns="http://www.w3.org/2000/svg" width="100" height="100"
                         viewBox="0 0 100 100">
                        <polygon points="0 50 37 68 37 32 0 50" style="fill:#FFCCBC"/>
                        <polygon points="100 50 64 32 64 68 100 50" style="fill:#FFCCBC"/>
                    </svg>
                </div>
                <div class="top">
                    <img src="https://webreportertunisie.files.wordpress.com/2014/02/photo-mongi-aouinet-63051.jpg"
                         draggable="false"/>
                </div>
                <div class="scroller scroller-top">
                    <svg class="scroller__thumb" xmlns="http://www.w3.org/2000/svg" width="100" height="100"
                         viewBox="0 0 100 100">
                        <polygon points="0 50 37 68 37 32 0 50" style="fill:#FFAB91"/>
                        <polygon points="100 50 64 32 64 68 100 50" style="fill:#FFAB91"/>
                    </svg>
                </div>
            </div>
        </div>
        <div class="container-fluid m-5">
            <div class="row ">
                <div class="col-md-4">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" src="https://www.eco-systemes.fr/uploads/cbtile/8ee903cb967852acb0572b8ba7cd5f892cee4980.jpg" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">Nos Missions et Challenges</h5>
                            <p class="card-text">Rien ne ce perds, Tout ce transforme
                               </p>
                            <a href="{{ path('front_missions_index') }}" class="btn btn-primary">Voir plus</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" src="https://www.eco-systemes.fr/uploads/cbtile/TuileRecyclageMobile.jpg" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">Recycler votre appareil</h5>
                            <p class="card-text">Vous pouvez recycler ou donner votre appareil.</p>
                            <a href="{{ path('appareilrc') }}" class="btn btn-primary">Voir plus</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card" style="width: 18rem;">
                        <img class="card-img-top" src="https://www.eco-systemes.fr/uploads/cbtile/EcoSyst-Michel-Richard-Pr-039-IMGP6886.jpg" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">Les centres de recyclages</h5>
                            <p class="card-text">Vous pouvez voir les centres de recyclages les plus pr√©s de cheaz vous ! </p>
                            <a href="{{ path('front_maps_index') }}" class="btn btn-primary">Voir plus</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

{% endblock %}

{% block javascripts %}

        <script>

            // I hope this over-commenting helps. Let's do this!
            // Let's use the 'active' variable to let us know when we're using it
            let active = false;
            // and define our dom elements to make it easier to read
            let scrollerMiddle = document.querySelector('.scroller-middle');
            let scrollerTop = document.querySelector('.scroller-top');


            // First we'll have to set up our event listeners
            // We want to watch for clicks on our scroller
            scrollerMiddle.addEventListener('mousedown', function () {
                active = "middle";
                // Add our scrolling class so the scroller has full opacity while active
                scrollerMiddle.classList.add('scrolling');
            });
            // We also want to watch the body for changes to the state,
            // like moving around and releasing the click
            // so let's set up our event listeners
            document.body.addEventListener('mouseup', function () {
                active = false;
                scrollerMiddle.classList.remove('scrolling');
            });
            document.body.addEventListener('mouseleave', function () {
                active = false;
                scrollerMiddle.classList.remove('scrolling');
            });
            // We'll have to do the same for our top scroller
            scrollerTop.addEventListener('mousedown', function () {
                active = "top";
                scrollerTop.classList.add('scrolling');
            });
            document.body.addEventListener('mouseup', function () {
                active = false;
                scrollerTop.classList.remove('scrolling');
            });
            document.body.addEventListener('mouseleave', function () {
                active = false;
                scrollerTop.classList.remove('scrolling');
            });

            // Let's figure out where their mouse is at
            document.body.addEventListener('mousemove', function (e) {
                if (!active) return;
                // Their mouse is here...
                let x = e.pageX;
                // but we want it relative to our wrapper
                x -= document.querySelector('.wrapper').getBoundingClientRect().left;
                // Okay let's change our state
                scrollIt(x);
            });

            // Let's use this function
            function scrollIt(x) {
                // Calculate our transform
                let transform = Math.max(0, (Math.min(x, document.querySelector('.wrapper').offsetWidth)));
                // we show all our bottom image but how much of our middle and top,
                // that'll depend on what we're dragging
                // if we're dragging the middle slider
                if (active === "middle") {
                    document.querySelector('.middle').style.width = transform + "px";
                    scrollerMiddle.style.left = transform - 25 + "px";
                    // if we're using scroller-middle, middle must always be to the right of top
                    if (scrollerTop.getBoundingClientRect().left > scrollerMiddle.getBoundingClientRect().left - 5) {
                        document.querySelector('.top').style.width = transform - 5 + "px";
                        scrollerTop.style.left = transform - 30 + "px";
                    }
                }
                // if we're dragging the top slider
                if (active === "top") {
                    document.querySelector('.top').style.width = transform + "px";
                    scrollerTop.style.left = transform - 25 + "px";
                    // if we're using scroller-top, top must always be to the left
                    if (scrollerTop.getBoundingClientRect().left > scrollerMiddle.getBoundingClientRect().left - 5) {
                        document.querySelector('.middle').style.width = transform + 5 + "px";
                        scrollerMiddle.style.left = transform - 20 + "px";
                    }
                }
            }

            // Let's set our opening state based off the width,
            // we want to show a bit of both images so the user can see what's going on
            active = "middle";
            scrollIt(460);
            active = "top";
            scrollIt(230);
            active = false;


            // And finally let's repeat the process for touch events
            // first our middle scroller...
            scrollerMiddle.addEventListener('touchstart', function () {
                active = "middle";
                scrollerMiddle.classList.add('scrolling');
            });
            document.body.addEventListener('touchend', function () {
                active = false;
                scrollerMiddle.classList.remove('scrolling');
            });
            document.body.addEventListener('touchcancel', function () {
                active = false;
                scrollerMiddle.classList.remove('scrolling');
            });

            // then scroller top, our second scroller
            scrollerTop.addEventListener('touchstart', function () {
                active = "top";
                scrollerTop.classList.add('scrolling');
            });
            document.body.addEventListener('touchend', function () {
                active = false;
                scrollerTop.classList.remove('scrolling');
            });
            document.body.addEventListener('touchcancel', function () {
                active = false;
                scrollerTop.classList.remove('scrolling');
            });

            document.querySelector('.wrapper').addEventListener('touchmove', function (e) {
                if (!active) return;
                e.preventDefault();
                let x = e.touches[0].pageX;
                x -= document.querySelector('.wrapper').getBoundingClientRect().left;
                scrollIt(x);
            });
        </script>



    {% endblock %}